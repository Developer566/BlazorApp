@page "/login"
@rendermode InteractiveServer
@using BlazorApp.Services
@inject AuthService AuthService
@inject NavigationManager Nav
<PageTitle>Login</PageTitle>
<div style="min-height:100vh; background:linear-gradient(135deg, #1a237e, #42a5f5); 
            display:flex; align-items:center; justify-content:center;">
    <div style="background:white; padding:40px; border-radius:15px; 
                min-width:380px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
        <div class="text-center mb-4">
            <span style="font-size:50px;">üîê</span>
            <h3 style="color:#1a237e; font-weight:bold;">Welcome Back</h3>
            <p class="text-muted">Please login to continue</p>
        </div>
        <div class="mb-3">
            <label style="font-weight:600;">Username</label>
            <input type="text" class="form-control form-control-lg" @bind="username" placeholder="Enter username" />
        </div>
        <div class="mb-4">
            <label style="font-weight:600;">Password</label>
            <input type="password" class="form-control form-control-lg" @bind="password" placeholder="Enter password" />
        </div>
        <button class="btn btn-primary w-100 btn-lg" @onclick="HandleLogin">
            Login ‚Üí
        </button>
        <br /><br />
        <a class="btn btn-secondary w-100 btn-lg" href="/register-user">
            Register ‚Üí
        </a>
        @if (errorMessage != "")
        {
            <div class="alert alert-danger mt-3 text-center">@errorMessage</div>
        }
    </div>
</div>

@code {
    private string username = "";
    private string password = "";
    private string errorMessage = "";
    private void HandleLogin()
    {
        bool success = AuthService.Login(username, password);
        if (success)
            Nav.NavigateTo("/");
        else
            errorMessage = "‚ùå Invalid username or password!";
    }
}